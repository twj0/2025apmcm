# 中国海关大豆进口数据获取工具

## 项目概述

本项目提供了一套完整的Python工具，用于获取、处理和分析中国海关大豆进口数据。由于海关网站的SSL证书验证问题，我们提供了多个版本的数据获取器，并包含完整的测试和演示功能。

## 文件结构

### 核心数据获取器
- `simple_customs_soybean_fetcher.py` - 基础版本，支持标准HTTP请求
- `ssl_customs_soybean_fetcher.py` - SSL兼容版本，处理证书验证问题
- `china_customs_soybean_fetcher.py` - 完整版本，支持多种数据源

### 测试和验证
- `simple_test_customs_fetcher.py` - 基础功能测试脚本
- `test_customs_soybean_fetcher.py` - 完整测试套件

### 使用示例和演示
- `quick_start_example.py` - 快速开始示例，展示基本用法
- `advanced_analysis_example.py` - 高级分析示例，包含统计分析和可视化
- `demo_simulation.py` - 演示模拟版本，使用模拟数据展示完整流程

### 文档和指南
- `USAGE_GUIDE.md` - 详细使用指南
- `README_customs_data_fetcher.md` - 项目概述和使用说明

## 快速开始

### 1. 运行演示版本（推荐）
由于海关网站的SSL证书问题，建议先运行演示版本了解功能：

```bash
python demo_simulation.py
```

### 2. 运行基础测试
验证环境配置是否正确：

```bash
python simple_test_customs_fetcher.py --basic
```

### 3. 快速开始示例
体验完整的使用流程：

```bash
python quick_start_example.py
```

### 4. 高级分析
进行数据分析和可视化：

```bash
python advanced_analysis_example.py
```

## 主要功能

### 数据获取
- ✅ 支持多数据源获取（统计数据门户、海关总署公告）
- ✅ 自动日期格式识别和处理
- ✅ 数据验证和错误处理
- ✅ 重试机制和超时控制

### 数据格式
- ✅ 标准化的数据输出格式
- ✅ CSV文件导出功能
- ✅ Excel文件导出（需要openpyxl）
- ✅ JSON格式支持

### 分析功能
- ✅ 基础统计分析（总量、均值、标准差等）
- ✅ 趋势分析（移动平均、趋势变化）
- ✅ 季节性分析（月度模式识别）
- ✅ 同比分析（年度对比）

### 可视化
- ✅ 时间序列图表
- ✅ 月度分布箱线图
- ✅ 年度对比柱状图
- ✅ 移动平均趋势图

## 已知问题和解决方案

### SSL证书验证问题
**问题**：海关网站使用自签名证书，导致SSL验证失败
**解决方案**：
1. 使用`ssl_customs_soybean_fetcher.py`中的SSL兼容版本
2. 在代码中设置`verify=False`（不推荐用于生产环境）
3. 联系海关获取官方API接口

### 数据获取限制
**问题**：网站可能有访问频率限制或反爬虫机制
**解决方案**：
1. 添加适当的延迟（time.sleep）
2. 使用代理IP
3. 设置合理的User-Agent
4. 考虑使用官方API（如果可用）

### 数据格式变化
**问题**：网站结构可能发生变化，影响数据提取
**解决方案**：
1. 定期更新选择器逻辑
2. 添加数据验证机制
3. 使用多个数据源作为备份

## 数据质量说明

### 模拟数据
演示版本使用模拟数据，具有以下特征：
- 基于真实的大豆进口量范围（200-1500万吨/月）
- 包含季节性模式（秋季进口量较高）
- 添加随机波动和特殊事件
- 保持合理的统计特性

### 实际数据获取建议
1. **联系海关官方**：获取官方数据接口或授权
2. **使用第三方数据服务**：考虑使用专业的贸易数据服务
3. **学术研究合作**：通过学术机构获取数据
4. **政府开放数据平台**：查看是否有开放的数据接口

## 使用建议

### 数据获取策略
1. **多数据源备份**：不要依赖单一数据源
2. **增量更新**：定期获取新数据，避免重复获取历史数据
3. **数据验证**：交叉验证不同来源的数据
4. **错误处理**：建立完善的错误处理和重试机制

### 分析应用
1. **市场研究**：分析进口趋势和市场变化
2. **政策评估**：评估贸易政策的影响
3. **供应链管理**：预测供应情况
4. **学术研究**：支持相关的学术研究

## 技术栈

- **Python 3.8+**: 主要编程语言
- **requests**: HTTP请求库
- **beautifulsoup4**: HTML解析
- **pandas**: 数据处理和分析
- **numpy**: 数值计算
- **matplotlib**: 数据可视化
- **seaborn**: 统计可视化

## 安装依赖

```bash
# 使用uv（推荐）
uv pip install requests beautifulsoup4 lxml pandas numpy matplotlib seaborn openpyxl

# 或使用pip
pip install requests beautifulsoup4 lxml pandas numpy matplotlib seaborn openpyxl
```

## 许可证

本项目仅供学习和研究使用，请遵守相关法律法规和数据使用规定。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交Issue到项目仓库
- 发送详细的错误报告和使用场景

## 更新日志

### v1.0.0 (2024-11-20)
- ✅ 基础数据获取功能
- ✅ 多数据源支持
- ✅ 完整的测试套件
- ✅ 详细的使用文档
- ✅ 演示和示例程序
- ✅ 数据分析和可视化功能

---

**注意**：本项目旨在提供技术解决方案的演示，实际使用时需要解决数据源访问的具体问题。建议联系相关数据提供方获取正式的数据访问授权。