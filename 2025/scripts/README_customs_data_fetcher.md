# 中国海关大豆进口数据获取工具使用说明

## 概述

本工具用于从中国海关总署官方渠道获取大豆进口数据。工具提供了多种数据获取方法，包括从海关统计数据门户、海关总署公告以及其他公开数据源获取数据。

## 文件说明

- `simple_customs_soybean_fetcher.py`: 简化版数据获取脚本，提供了基本的获取和保存功能
- `china_customs_soybean_fetcher.py`: 完整版数据获取脚本，包含更多高级功能

## 环境要求

- Python 3.11+
- uv 包管理器
- 项目依赖已包含在 `pyproject.toml` 中

## 安装依赖

使用uv安装项目依赖：

```bash
uv sync
```

## 使用方法

### 基本使用

1. 运行简化版脚本：

```bash
cd 2025/scripts
python simple_customs_soybean_fetcher.py
```

2. 按照提示输入年份和月份：
   - 年份：例如 2024
   - 月份：1-12 之间的数字

3. 脚本将尝试获取指定月份的大豆进口数据，并保存为CSV文件到 `../data/raw/` 目录

### 输出文件

数据将保存为 `soybean_import_{year}_{month:02d}.csv` 格式的CSV文件，包含以下字段：

- `year`: 年份
- `month`: 月份
- `date`: 日期字符串 (YYYY-MM格式)
- `total_import`: 总进口量 (吨)
- `source`: 数据来源
- `query_time`: 查询时间

## 数据获取方法

脚本按以下优先级尝试获取数据：

1. **海关统计数据门户**: 从海关统计数据门户获取结构化数据
2. **海关总署公告**: 从海关总署发布的公告中提取数据
3. **其他公开数据源**: 从其他公开数据源获取数据

## 注意事项

1. **数据可用性**: 
   - 海关数据通常有延迟，可能需要等待一段时间后才能获取到最新月份的数据
   - 建议先尝试获取较早月份的数据进行测试

2. **网络连接**:
   - 确保网络连接正常
   - 如果遇到连接问题，可能需要稍后重试

3. **网站结构变化**:
   - 如果海关网站结构发生变化，脚本可能需要更新
   - 如果脚本无法获取数据，请检查日志文件 `china_customs_soybeans_simple.log`

4. **数据准确性**:
   - 本工具仅作为数据获取的辅助工具
   - 对于正式研究，建议核实数据的准确性

## 故障排除

### 常见问题

1. **无法获取数据**
   - 检查网络连接
   - 尝试获取更早期的数据
   - 查看日志文件了解详细错误信息

2. **数据保存失败**
   - 检查 `../data/raw/` 目录是否存在
   - 确保有写入权限

3. **依赖问题**
   - 确保已安装所有依赖：`uv sync`
   - 检查Python版本是否符合要求

### 日志文件

脚本运行时会生成日志文件 `china_customs_soybeans_simple.log`，包含详细的运行信息和错误信息，可用于故障排除。

## 高级用法

对于更复杂的数据获取需求，可以使用完整版脚本 `china_customs_soybean_fetcher.py`，它提供了更多功能：

- 批量获取多个月份的数据
- 更详细的数据解析
- 更多的数据源支持
- 更灵活的数据格式化选项

## 技术支持

如果遇到问题或需要帮助，请：

1. 检查日志文件了解详细错误信息
2. 确保所有依赖已正确安装
3. 尝试获取更早期的数据进行测试
4. 检查网络连接

## 数据来源

本工具主要从以下官方渠道获取数据：

1. 中国海关总署官方网站: https://www.customs.gov.cn
2. 海关统计数据门户: https://stats.customs.gov.cn/
3. 海关在线查询平台: https://online.customs.gov.cn

## 法律声明

本工具仅用于学术研究目的，使用者应遵守相关法律法规和网站使用条款。